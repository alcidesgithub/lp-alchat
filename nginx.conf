server {
    listen 80;
    server_name _;

    root /usr/share/nginx/html;
    index index.html;

    # Compressão Gzip (Site mais rápido)
    gzip on;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml;

    # Cache para imagens e CSS (7 dias)
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg)$ {
        expires 7d;
        add_header Cache-Control "public, no-transform";
    }

    # Configuração de URL Limpa (Remove .html)
    location / {
        # Se a URL tiver .html, redireciona para sem .html
        if ($request_uri ~ ^/(.*)\.html(\?|$)) {
            return 301 /$1$is_args$args;
        }

        # Tenta abrir o arquivo: 1. com .html, 2. pasta, 3. 404
        try_files $uri.html $uri $uri/ =404;
    }

    error_page 404 /index.html;
}
